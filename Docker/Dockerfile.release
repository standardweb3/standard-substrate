ARG RUNTIME_IMAGE=ubuntu:focal

FROM $RUNTIME_IMAGE as runtime

ARG BINARY
ENV BINARY=$BINARY
LABEL maintainer="Standard Tech <tech@standard.tech>"
LABEL description="Standard Tech $BINARY Node"

RUN echo "#!/bin/bash \n set -e \n exec $BINARY" > ./entrypoint.sh
RUN chmod +x ./entrypoint.sh

COPY ./$BINARY /usr/local/bin

EXPOSE 30333 9933 9944
VOLUME ["/data"]

ENTRYPOINT ["/entrypoint.sh"]
CMD ["--help"]